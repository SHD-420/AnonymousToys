"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[638],{752:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(8222);const n={name:"BaseTextField",props:{modelValue:{type:String,default:""},label:{type:String,default:""},isTextArea:{type:Boolean,default:!1},type:{type:String,default:"text"},min:{type:Number,default:null},max:{type:Number,default:null},isInvalid:{type:Boolean,default:!1}},emits:["update:modelValue"],setup:function(e){var t=e.isTextArea?"textarea":"input",r=(0,a.iH)(!1);return function(n,l){return(0,a.wg)(),(0,a.iD)("div",{class:(0,a.C_)(["grid rounded-md border-t border-b-2 px-4 py-1",e.isInvalid?"border-red-600 bg-red-50":"border-amber-500 bg-slate-100"])},[((0,a.wg)(),(0,a.j4)((0,a.LL)((0,a.SU)(t)),{rows:"5",class:"row-start-1 col-start-1 bg-transparent focus:outline-none resize-none",type:e.type,minlength:e.min,maxlength:e.max,value:e.modelValue,onInput:l[0]||(l[0]=function(e){return n.$emit("update:modelValue",e.target.value)}),onFocus:l[1]||(l[1]=function(e){return r.value=!0}),onBlur:l[2]||(l[2]=function(e){return r.value=!1})},null,40,["type","minlength","maxlength","value"])),(0,a._)("p",{class:(0,a.C_)([{"scale-75 -translate-y-6 -translate-x-2 opacity-100":r.value||e.modelValue.length},"pointer-events-none origin-top-left col-start-1 row-start-1 duration-200 opacity-50"])},(0,a.zw)(e.label),3)],2)}}}},638:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var a=r(8222),n=r(752),l=r(4318),o=r(7810),i=r(3907);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,l=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(l.push(a.value),!t||l.length!==t);o=!0);}catch(e){i=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw n}}return l}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var p={class:"max-w-lg mx-auto py-12"},m={key:0,class:"flex space-x-4 text-xl items-center p-4 text-center justify-center bg-slate-100 text-slate-900 rounded-lg shadow-lg"},f=(0,a._)("p",null,"Tu carrito esta vacío...",-1),b={key:1},v=(0,a._)("h2",{class:"text-4xl font-semibold text-slate-900 mb-8"}," Confirmar pago ",-1),x=(0,a._)("p",{class:"text-slate-500 mb-4"}," Por favor ingrese su correo electrónico para iniciar el proceso. ",-1),y=["onSubmit"],g={class:"bg-amber-500 px-8 py-2 text-white rounded-md",type:"submit"},h={key:0,class:"h-4 block w-4 border-2 my-1 rounded-full border-b-transparent border-white animate-spin mx-auto"},w={key:1},S={key:0,class:"mb-8 bg-slate-200 border rounded-md border-slate-500 py-8 px-4 flex space-x-4"},_=(0,a._)("p",{class:"text-slate-900"}," El enlace para proceder con la compra ha sido enviado por correo. Por favor revise su correo electrónico y siga las instrucciones. ",-1),k={key:1,class:"mb-8 bg-red-50 border rounded-md border-red-600 py-8 px-4 flex space-x-4"},A=(0,a._)("p",{class:"text-red-600"}," Se produjo algún error. Por favor, intenta de nuevo ",-1),U={class:"bg-slate-100 py-4 px-8 rounded-md shadow mt-8"},I=(0,a._)("h4",{class:"text-2xl font-semibold mb-2"}," Requesting checkout for: ",-1),C={class:"flex space-x-2 items-center"},D=(0,a._)("span",null,"Total Price:",-1),V={class:"text-xl"},j={class:"flex space-x-2 items-center mb-4"},z=(0,a._)("span",null,"Item count:",-1),T={class:"text-xl"},q=(0,a.Uk)("Edit cart");const P={name:"RequestCheckout",setup:function(e){var t=(0,a.iH)(""),r=(0,a.iH)(!1),c=(0,l.ZP)(),d=(0,i.oR)(),P=(0,a.Fl)((function(){return d.state.cart})),E=(0,a.iH)("pending");function N(){var e=P.value.items;e.size&&["pending","error"].includes(E.value)&&(/^\S+@\S+\.\S+$/.test(t.value)?(E.value="loading",c.post("/api/checkout",{email:t.value,items:u(e.entries()).map((function(e){var t=s(e,2);return{product_id:t[0],quantity:t[1].quantity}}))}).then((function(e){"success"===e.data.message&&(t.value="",E.value="success")})).catch((function(e){console.log(e.response),E.value="error"}))):r.value=!0)}return function(e,l){var i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.SU)(P).items.size?((0,a.wg)(),(0,a.iD)("div",b,[v,x,(0,a._)("form",{class:"flex space-x-4 w-full mb-4",onSubmit:(0,a.iM)(N,["prevent"])},[(0,a.Wm)(n.Z,{label:"Email",modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=function(e){return t.value=e}),"is-invalid":r.value,class:"flex-grow"},null,8,["modelValue","is-invalid"]),(0,a._)("button",g,["loading"===E.value?((0,a.wg)(),(0,a.iD)("span",h)):((0,a.wg)(),(0,a.iD)("span",w," Submit "))])],40,y),"success"===E.value?((0,a.wg)(),(0,a.iD)("div",S,[(0,a.Wm)((0,a.SU)(o.GN),{icon:"fa-check",class:"text-2xl text-slate-500"}),_])):(0,a.kq)("",!0),"error"===E.value?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)((0,a.SU)(o.GN),{icon:"fa-exclamation-triangle",class:"text-2xl text-red-600"}),A])):(0,a.kq)("",!0),(0,a._)("div",U,[I,(0,a._)("p",C,[D,(0,a._)("span",V,"$"+(0,a.zw)((0,a.SU)(P).totalPrice),1)]),(0,a._)("p",j,[z,(0,a._)("span",T,(0,a.zw)((0,a.SU)(P).items.size),1)]),(0,a.Wm)(i,{to:{name:"Cart"},class:"text-amber-500 hover:underline"},{default:(0,a.w5)((function(){return[q]})),_:1})])])):((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)((0,a.SU)(o.GN),{icon:"fa-exclamation-triangle"}),f]))])}}}}}]);